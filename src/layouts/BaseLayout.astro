---
// Background visuals temporarily removed for 1:1 minimal clone
// Dark layout with retro road grid animation (enhanced)
import RoadGrid from '../components/RoadGrid.astro';
import RoadPerspective from '../components/RoadPerspective.astro';
import ParticleBackground from '../components/ParticleBackground.astro';
import ShakeDetector from '../components/ShakeDetector.astro';
import siteLogo from '../pages/portfolio/dotmavriqlogo.png';

const pathname = Astro.url.pathname;
const isHome = pathname === '/';
const isActive = (p: string) => pathname === p || (p !== '/' && pathname.startsWith(p));

export interface Props { title?: string; description?: string; }
const { title = 'blog.dotMavriQ', description = 'Personal blog of Jonatan Jansson (dotMavriQ)' } = Astro.props as Props;
---
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
  <meta name="description" content={description} />
  <meta name="color-scheme" content="dark light" />
  <link rel="canonical" href="https://blog.dotmavriq.life/" />
  <!-- Open Graph -->
  <meta property="og:site_name" content="blog.dotMavriQ" />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://blog.dotmavriq.life/" />
  <meta property="og:image" content="/logo.png" />
  <!-- Twitter -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content="/logo.png" />
    <link rel="alternate" type="application/rss+xml" href="/rss.xml" />
    <meta name="theme-color" content="#1d2021" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <!-- 2025 font pairing: Inter (UI/body) + JetBrains Mono (code/meta) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
  </head>
  <body class:list={["bg-gruv-bg","text-gruv-fg","font-sans","antialiased","min-h-screen","flex","flex-col","relative","overflow-x-hidden", isHome && 'home-no-scroll']}>
    <a href="#main" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-gruv-surface text-gruv-yellow px-3 py-2 rounded">Skip to content</a>
    <!-- Layered background effects (respect prefers-reduced-motion) -->
    <ParticleBackground />
    {isHome && (
      <>
        <RoadGrid />
        <RoadPerspective />
      </>
    )}
    <ShakeDetector />
    <header class="relative z-40 bg-[#121314]/95 backdrop-blur-sm border-b border-gruv-surface2/70 shadow-lg shadow-black/30">
      <nav aria-label="Primary" class="max-w-6xl mx-auto px-5 lg:px-6 py-4 flex items-center justify-between gap-5 text-[15px] tracking-tight">
        <a href="/" aria-label="Home" class="group flex items-center gap-3 text-[22px] font-extrabold font-heading text-gruv-yellow focus:outline-none focus:ring-2 focus:ring-gruv-yellow/60 rounded transition-colors">
          <img src={siteLogo.src} width={56} height={56} alt="dotMavriQ logo" class="rounded-sm transition-transform duration-300 group-hover:scale-105" loading="lazy" decoding="async" />
          <span class="leading-none">blog.dotMavriQ</span>
        </a>
        <div class="flex flex-wrap items-center gap-3 ml-auto">
          <a class:list={["nav-chip","nav-orange", isActive('/about') && 'is-active']} aria-current={isActive('/about') ? 'page' : undefined} href="/about">About</a>
          <a class:list={["nav-chip","nav-green", isActive('/cv') && 'is-active']} aria-current={isActive('/cv') ? 'page' : undefined} href="/cv">CV</a>
          <a class:list={["nav-chip","nav-yellow", isActive('/portfolio') && 'is-active']} aria-current={isActive('/portfolio') ? 'page' : undefined} href="/portfolio">Portfolio</a>
          <a class:list={["nav-chip","nav-blue", isActive('/blog') && 'is-active']} aria-current={isActive('/blog') ? 'page' : undefined} href="/blog">Blog</a>
          <a class:list={["nav-chip","nav-red", isActive('/contact') && 'is-active']} aria-current={isActive('/contact') ? 'page' : undefined} href="/contact">Contact</a>
        </div>
      </nav>
    </header>
    <main id="main" class="flex-1 w-full relative z-20">
      <slot />
    </main>
    <footer class:list={[
      isHome ? 'absolute bottom-0 left-0 right-0' : 'relative',
      'z-50','bg-[#121314]/92','backdrop-blur-[2px]','border-t','border-gruv-surface2/70','shadow-inner','shadow-black/40',
      isHome ? 'mt-0' : 'mt-10'
    ]}>
      <div class:list={["px-6", isHome ? 'py-2' : 'py-5', "text-[11px]","md:text-xs","text-gruv-muted","font-mono","tracking-tight","w-full","max-w-6xl","mx-auto","flex","items-center","justify-center"]}>
        <span class="whitespace-nowrap">ðŸ„¯ 2025 dotMavriQ Â· All base are belong to us.</span>
      </div>
    </footer>
  </body>
</html>
<style>
  :root { --font-ui:'Inter',system-ui,sans-serif; --font-mono:'JetBrains Mono','Fira Code',monospace; }
  .font-heading{ font-family:var(--font-ui); letter-spacing:-0.5px; }
  body{ font-family:var(--font-ui); }
  code,pre,.font-mono{ font-family:var(--font-mono); }
  .nav-chip { @apply relative px-3 py-2 rounded-md font-medium text-gruv-fg/90 bg-[#1c1d1e] border border-[#242628] shadow-sm transition-all duration-150 hover:shadow-md focus:shadow-md focus:outline-none focus:ring-2 focus:ring-gruv-yellow/40; }
  .nav-chip:hover,.nav-chip:focus { @apply border-gruv-surface2 translate-y-[-1px]; }
  .nav-chip.is-active { @apply bg-gruv-yellow text-gruv-bg border-gruv-yellow shadow-md; }
  .nav-chip.is-active.nav-blue { @apply bg-gruv-blue; }
  .nav-chip.is-active.nav-green { @apply bg-gruv-green; }
  .nav-chip.is-active.nav-orange { @apply bg-gruv-orange; }
  .nav-chip.is-active.nav-red { @apply bg-gruv-red; }
  .nav-chip.is-active.nav-yellow { @apply bg-gruv-yellow; }
  .nav-blue:hover,.nav-blue:focus { @apply text-gruv-bg bg-gruv-blue; }
  .nav-orange:hover,.nav-orange:focus { @apply text-gruv-bg bg-gruv-orange; }
  .nav-green:hover,.nav-green:focus { @apply text-gruv-bg bg-gruv-green; }
  .nav-yellow:hover,.nav-yellow:focus { @apply text-gruv-bg bg-gruv-yellow; }
  .nav-red:hover,.nav-red:focus { @apply text-gruv-bg bg-gruv-red; }
  @media (max-width:640px){ .nav-chip{ @apply px-2 py-1 text-[13px]; } }
  /* Removed extended footer navigation styles */
  /* Home: hide scrollbar while footer overlays */
  body.home-no-scroll{ overflow-y:hidden; }
</style>
