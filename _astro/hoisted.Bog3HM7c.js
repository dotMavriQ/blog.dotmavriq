import"./hoisted.DZlar31k.js";const A=6,m=document.getElementById("blog-search"),C=document.querySelectorAll("#blog-grid > a"),w=document.querySelectorAll('[data-js="tag-filter"] button'),h=document.getElementById("filter-count"),g=document.querySelector('[data-tag="__all__"]'),I=document.getElementById("load-more-btn"),p=document.getElementById("load-more-wrap"),f=new Set;let l="",M=A,_;function P(){const t=new URL(window.location.href);f.size?t.searchParams.set("tags",[...f].join(",")):t.searchParams.delete("tags"),l?t.searchParams.set("q",l):t.searchParams.delete("q"),history.replaceState(null,"",t)}function v(t,s){if(!t||!s)return 0;const r=t.toLowerCase(),i=s.toLowerCase();if(i.includes(r))return 100;const o=r.split(/\s+/).filter(Boolean),a=i.split(/[\s,]+/).filter(Boolean);if(o.length===0)return 0;let n=0;for(const e of o){let c=0;for(const d of a){if(d.includes(e)){c=Math.max(c,80);continue}if(d.length>=3&&e.includes(d)){c=Math.max(c,70);continue}if(d.startsWith(e.slice(0,2))){const E=x(e,d),B=Math.max(e.length,d.length);E<=Math.ceil(B*.45)&&(c=Math.max(c,60-E*8));continue}const y=x(e,d),q=Math.max(e.length,d.length);y<=Math.ceil(q*.4)&&(c=Math.max(c,50-y*10))}if(c===0)return 0;n+=c}return n/o.length}function x(t,s){const r=t.length,i=s.length;if(Math.abs(r-i)>3)return Math.max(r,i);const o=Array.from({length:i+1},(n,e)=>e),a=new Array(i+1);for(let n=1;n<=r;n++){a[0]=n;for(let e=1;e<=i;e++)a[e]=t[n-1]===s[e-1]?o[e-1]:1+Math.min(o[e-1],o[e],a[e-1]);for(let e=0;e<=i;e++)o[e]=a[e]}return o[i]}function T(t){if(!l)return 1;const s=t.dataset.title||"",r=t.dataset.excerpt||"",i=t.dataset.tags||"",o=v(l,s),a=v(l,i),n=v(l,r);return Math.max(o*1,a*.85,n*.7)}function u(){const t=!f.size;let s=0;const r=[];if(C.forEach(a=>{const n=a.dataset.tags?.split(",")||[],c=t||[...f].every(d=>n.includes(d))?T(a):0;r.push({el:a,score:c})}),l){r.sort((n,e)=>e.score-n.score);const a=document.getElementById("blog-grid");if(a)for(const{el:n}of r)a.appendChild(n)}const i=l||!t;let o=0;r.forEach(({el:a,score:n})=>{n>0?(o++,i||o<=M?(a.classList.remove("card-hidden"),s++):a.classList.add("card-hidden")):a.classList.add("card-hidden")}),g&&(g.dataset.active=t?"true":"false",g.setAttribute("aria-pressed",String(t))),p&&(i||M>=o?p.classList.add("hidden"):p.classList.remove("hidden")),h&&(t&&!l?h.classList.add("hidden"):(h.textContent=`${s} of ${o}`,h.classList.remove("hidden"))),P()}w.forEach(t=>{t.addEventListener("click",()=>{const s=t.dataset.tag;if(s){if(s==="__all__"){f.clear(),w.forEach(r=>{r.dataset.tag!=="__all__"&&(r.dataset.active="false",r.setAttribute("aria-pressed","false"))}),u();return}f.has(s)?(f.delete(s),t.dataset.active="false",t.setAttribute("aria-pressed","false")):(f.add(s),t.dataset.active="true",t.setAttribute("aria-pressed","true")),u()}})});m?.addEventListener("input",()=>{clearTimeout(_),_=setTimeout(()=>{l=m.value.trim(),u()},150)});const b=new URL(window.location.href).searchParams,S=b.get("tags");if(S)for(const t of S.split(",")){const s=document.querySelector(`[data-tag="${CSS.escape(t)}"]`);s&&(f.add(t),s.dataset.active="true",s.setAttribute("aria-pressed","true"))}const L=b.get("q");L&&m&&(m.value=L,l=L);u();I?.addEventListener("click",()=>{M+=A,u()});
