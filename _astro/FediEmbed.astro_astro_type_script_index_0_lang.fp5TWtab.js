if(!document.getElementById("fedi-lightbox")){let l=function(e){a=e;const r=t[e];s.src=r.dataset.full||"",s.alt=r.dataset.alt||"",d.textContent=t.length>1?`${e+1} / ${t.length}`:"",m.style.display=t.length>1?"":"none",g.style.display=t.length>1?"":"none",o.style.display="flex",document.documentElement.style.overflow="hidden"},c=function(){o.style.display="none",document.documentElement.style.overflow="",s.src=""};const o=document.createElement("div");o.id="fedi-lightbox",Object.assign(o.style,{position:"fixed",inset:"0",zIndex:"9999",background:"rgba(0,0,0,0.92)",display:"none",alignItems:"center",justifyContent:"center",flexDirection:"column",cursor:"pointer"});const s=document.createElement("img");Object.assign(s.style,{maxWidth:"92vw",maxHeight:"85vh",objectFit:"contain",borderRadius:"0.375rem",cursor:"default"});const i=document.createElement("button");i.textContent="✕",i.setAttribute("aria-label","Close lightbox"),Object.assign(i.style,{position:"absolute",top:"1rem",right:"1.25rem",background:"none",border:"none",color:"#ebdbb2",fontSize:"1.5rem",cursor:"pointer",lineHeight:"1",fontFamily:"Inter, system-ui, sans-serif",fontWeight:"300",padding:"0.5rem",opacity:"0.8"}),i.addEventListener("mouseenter",()=>i.style.opacity="1"),i.addEventListener("mouseleave",()=>i.style.opacity="0.8");const d=document.createElement("div");Object.assign(d.style,{position:"absolute",bottom:"1rem",color:"#a89984",fontFamily:"JetBrains Mono, monospace",fontSize:"0.75rem",userSelect:"none"});const u=(e,r)=>{const n=document.createElement("button");return n.textContent=r?"‹":"›",n.setAttribute("aria-label",e),Object.assign(n.style,{position:"absolute",top:"50%",transform:"translateY(-50%)",[r?"left":"right"]:"0.75rem",background:"none",border:"none",color:"#ebdbb2",fontSize:"2.5rem",cursor:"pointer",lineHeight:"1",fontFamily:"Inter, system-ui, sans-serif",fontWeight:"300",padding:"0.75rem",opacity:"0.6"}),n.addEventListener("mouseenter",()=>n.style.opacity="1"),n.addEventListener("mouseleave",()=>n.style.opacity="0.6"),n},m=u("Previous image",!0),g=u("Next image",!1);o.append(i,s,m,g,d),document.body.appendChild(o);let t=[],a=0;m.addEventListener("click",e=>{e.stopPropagation(),l((a-1+t.length)%t.length)}),g.addEventListener("click",e=>{e.stopPropagation(),l((a+1)%t.length)}),i.addEventListener("click",c),o.addEventListener("click",e=>{e.target===o&&c()}),s.addEventListener("click",e=>e.stopPropagation()),document.addEventListener("keydown",e=>{o.style.display!=="none"&&(e.key==="Escape"&&c(),e.key==="ArrowLeft"&&l((a-1+t.length)%t.length),e.key==="ArrowRight"&&l((a+1)%t.length))}),document.addEventListener("click",e=>{const r=e.target.closest(".fedi-lightbox-trigger");if(!r)return;const n=r.dataset.gallery;t=Array.from(document.querySelectorAll(`.fedi-lightbox-trigger[data-gallery="${n}"]`)),l(Number(r.dataset.index)||0)})}
