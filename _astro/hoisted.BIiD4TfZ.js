import"./hoisted.DZlar31k.js";const I=6,w=document.getElementById("blog-search"),D=document.querySelectorAll("#blog-grid > a"),A=document.querySelectorAll('[data-js="tag-filter"] button'),m=document.getElementById("filter-count"),x=document.querySelector('[data-tag="__all__"]'),G=document.getElementById("load-more-btn"),C=document.getElementById("load-more-wrap"),c=new Set,R=document.getElementById("exact-filter");let i="",L=I,M,y=null,j=null,E=!1;async function k(){if(!(y||E)){E=!0;try{y=await(await fetch("/search-index.json")).json(),j=new Map(y.map(e=>[e.slug,e]))}catch{}E=!1}}function H(){const t=new URL(window.location.href);c.size?t.searchParams.set("tags",[...c].join(",")):t.searchParams.delete("tags"),i?t.searchParams.set("q",i):t.searchParams.delete("q"),history.replaceState(null,"",t)}function Z(t,e,s){if(Math.abs(t.length-e.length)>s)return s+1;const r=Array.from({length:e.length+1},(a,n)=>n),o=new Array(e.length+1);for(let a=1;a<=t.length;a++){o[0]=a;for(let n=1;n<=e.length;n++)o[n]=t[a-1]===e[n-1]?r[n-1]:1+Math.min(r[n-1],r[n],o[n-1]);for(let n=0;n<=e.length;n++)r[n]=o[n]}return r[e.length]}function J(t){return t<=4?0:t<=7?1:t<=11?2:3}function K(t,e){let s=0;const r=J(t.length);for(const o of e){if(o===t){s=Math.max(s,100);break}if(o.startsWith(t)){s=Math.max(s,85);continue}if(r>0){const a=Z(t,o,r);a<=r&&(s=Math.max(s,70-a*15))}}return s}function p(t,e){if(!e.length)return 0;let s=0;for(const r of t){const o=K(r,e);if(o===0)return 0;s+=o}return s/t.length}function g(t){return t.toLowerCase().split(/[\s,.:;!?'"_\-/\\()\[\]{}|]+/).filter(e=>e.length>0)}function N(t){if(!i)return 1;const e=i.toLowerCase(),s=g(e);if(!s.length)return 1;const r=t.dataset.slug||"",o=j?.get(r),a=t.dataset.title||"",n=t.dataset.excerpt||"",l=t.dataset.tags||"",u=o?.body??"",f=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),S=s.length===1?new RegExp(`\\b${f}\\b`):null,h=b=>S?S.test(b.toLowerCase()):b.toLowerCase().includes(e);if(h(a))return 1e3;if(h(u))return 500;if(h(l))return 450;if(h(n))return 400;const P=g(a),W=g(n),$=g(l),T=u?g(u):[],z=p(s,P)*4,Q=p(s,$)*2.5,U=p(s,W)*1.5,F=p(s,T)*1,_=Math.max(z,Q,U,F);return _>0?_:0}function d(){const t=!c.size,e=!!i||!t,s=[];if(D.forEach(a=>{const n=a.dataset.tags?.split(",")??[],l=R?.checked,u=t||(l?n.length===c.size&&[...c].every(f=>n.includes(f)):[...c].every(f=>n.includes(f)));s.push({el:a,score:u?N(a):0})}),i){s.sort((n,l)=>l.score-n.score);const a=document.getElementById("blog-grid");if(a)for(const{el:n}of s)a.appendChild(n)}let r=0,o=0;s.forEach(({el:a,score:n})=>{if(n>0){r++;const l=e||r<=L;a.classList.toggle("card-hidden",!l),l&&o++}else a.classList.add("card-hidden")}),x&&(x.dataset.active=String(t),x.setAttribute("aria-pressed",String(t))),C&&C.classList.toggle("hidden",e||L>=r),m&&(t&&!i?m.classList.add("hidden"):(m.textContent=`${o} result${o!==1?"s":""}`,m.classList.remove("hidden"))),H()}A.forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.tag;e&&(e==="__all__"?(c.clear(),A.forEach(s=>{s.dataset.tag!=="__all__"&&(s.dataset.active="false",s.setAttribute("aria-pressed","false"))})):c.has(e)?(c.delete(e),t.dataset.active="false",t.setAttribute("aria-pressed","false")):(c.add(e),t.dataset.active="true",t.setAttribute("aria-pressed","true")),d())})});w?.addEventListener("input",()=>{clearTimeout(M),M=setTimeout(async()=>{i=w.value.trim(),i&&!y&&await k(),d()},150)});R?.addEventListener("change",()=>d());G?.addEventListener("click",()=>{L+=I,d()});const q=new URL(window.location.href).searchParams,B=q.get("tags");if(B)for(const t of B.split(",")){const e=document.querySelector(`[data-tag="${CSS.escape(t)}"]`);e&&(c.add(t),e.dataset.active="true",e.setAttribute("aria-pressed","true"))}const v=q.get("q");v&&w?(w.value=v,i=v,k().then(d)):d();
